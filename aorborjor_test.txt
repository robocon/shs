#### 
# ดูว่าดีดเข้าซักประวัติผิดรึป่าว
####
SELECT a.`HN`,CONCAT(a.`name`,' ',a.`surname`) AS `ptname`,b.`vn`,d.`hn` 
FROM (
	SELECT `HN`,`name`,`surname` 
	FROM `opcardchk`
	WHERE ( `part` = 'อบจ60' 
		AND `course` = 'อบจ' 
		AND ( 
			`branch` != 'เงินสด' 
			AND `branch` != 'ประกันสังคม' 
		) 
	) 
) AS a  
LEFT JOIN ( 
	SELECT `hn`,`vn` FROM `opday` WHERE `thidate` LIKE '2560-05-03%' 
) AS b ON b.`hn` = a.`HN` 
RIGHT JOIN ( 
	SELECT `hn`,`ptname`,`row_id` FROM `out_result_chkup` WHERE `part` = 'อบจ60' 
) AS d ON d.`hn` = a.`HN` 
#WHERE b.`vn` IS NOT NULL 
LIMIT 200 

UNION 

SELECT a.`HN`,CONCAT(a.`name`,' ',a.`surname`) AS `ptname`,b.`vn`,d.`hn` 
FROM (
	SELECT `HN`,`name`,`surname` 
	FROM `opcardchk`
	WHERE ( `part` = 'อบจ60' 
		AND `course` = 'อบจ' 
		AND ( 
			`branch` != 'เงินสด' 
			AND `branch` != 'ประกันสังคม' 
		) 
	) 
) AS a  
LEFT JOIN ( 
	SELECT `hn`,`vn` FROM `opday` WHERE `thidate` LIKE '2560-05-03%' 
) AS b ON b.`hn` = a.`HN` 
LEFT JOIN ( 
	SELECT `hn`,`ptname`,`row_id` FROM `out_result_chkup` WHERE `part` = 'อบจ60' 
) AS d ON d.`hn` = a.`HN` 
#WHERE b.`vn` IS NOT NULL 
LIMIT 200 







/**
	* รายการ labdetail ของวันที่4
SELECT a.`HN`,a.`course`,a.`branch`,c.* 
FROM ( 
	SELECT `row`,`HN`,`course`,`branch`,CONCAT('170503',`exam_no`) AS `labnumber`
	FROM `opcardchk` 
	WHERE `part` = 'อบจ60' 
	AND `exam_no` > 437
	AND `branch` != 'เงินสด' 
) AS a 
LEFT JOIN ( 
	SELECT * FROM `orderdetail` WHERE `labnumber` LIKE '170503%' 
) AS c ON c.`labnumber` = a.`labnumber` 
ORDER BY a.`row` ASC
*/